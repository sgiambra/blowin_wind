
 make.py started: 2018-03-12 13:21:22 C:\Users\giamb\Documents\GitHub\blowin_wind\analysis\covariates_balance\code 




Execute:  StataSE-64 /e do "./analysis.do"

  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.0   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     Special Edition                  College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

110-user Stata network perpetual license:
       Serial number:  401506201178
         Licensed to:  Brown University
                       Brown University

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  Maximum number of variables is set to 5000; see help set_maxvar.

. do ./analysis.do 

. set more off

. adopath + ../../../lib/stata/gslab_misc/ado
  [1]  (BASE)      "C:\Program Files (x86)\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files (x86)\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"

. adopath + ../../../lib/third_party/stata_tools
  [1]  (BASE)      "C:\Program Files (x86)\Stata15\ado\base/"
  [2]  (SITE)      "C:\Program Files (x86)\Stata15\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "c:\ado\personal/"
  [5]  (PLUS)      "c:\ado\plus/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "../../../lib/stata/gslab_misc/ado"
  [8]              "../../../lib/third_party/stata_tools"

. preliminaries, loadglob("../../../lib/python/wind/input_params.txt")

. 
. program main
  1.     local table_file "../output/tables.txt"
  2.     local excluded_controls = "pop male_ratio white_ratio asian_ratio"
  3.     local controls = "avg_income black_ratio elevation near_dist"
  4.     local inst = "wind_zip_area_ratio"
  5. 
.     use "${GoogleDrive}/stata/wind_prices_turbines.dta", clear
  6. 
.     bys regionname: egen ever_wind_farm = max(wind_farm)
  7.     duplicates drop regionname, force
  8.     
.     foreach control in `controls' {
  9.         local c_est = "_b[`inst'] \ _se[`inst']"
 10.         
.         sum `control'
 11.         matrix sample_means = (nullmat(sample_means) \ r(mean) \ r(sd))
 12. 
.         ttest `control', by(ever_wind_farm) unequal
 13.         cap matrix drop no_windfarm_means windfarm_means diff
 14.         matrix no_windfarm_means = (r(mu_1) \ r(sd_1))
 15.         matrix windfarm_means = (r(mu_2) \ r(sd_2))
 16.         matrix diff = (r(mu_2) - r(mu_1) \ r(se))
 17.         matrix by_windfarm_means = (nullmat(by_windfarm_means) \ (windfarm_means, no_windfarm_means, diff))
 18.         
.         reg `control' `inst'
 19.         matrix reg_means = (nullmat(reg_means) \ `c_est')
 20.         
.         local resid_controls: list controls- control
 21.         reg `control' `inst' `resid_controls'
 22.         matrix reg_control_means = (nullmat(reg_control_means) \ `c_est')
 23.     }
 24.     sample_sizes
 25.     matrix sample_size = r(sample_size)
 26. 
.     *matrix TABLE = ((sample_means, by_windfarm_means, ///
>     *                 reg_means, reg_control_means) \ sample_size)
.     matrix TABLE_SLIDE = ((sample_means, by_windfarm_means) \ sample_size)
 27. 
.     matrix_to_txt, saving(`table_file') mat(TABLE_SLIDE) ///
>         format(%20.5f) title(<tab:cov_balance_slide>) replace
 28. end

. 
. program sample_sizes, rclass
  1.     count
  2.     scalar N = r(N)
  3.     count if ever_wind_farm == 1
  4.     scalar wind_farm_N = r(N)
  5.     count if ever_wind_farm == 0
  6.     scalar no_wind_farm_N = r(N)
  7. 
.     matrix sample_size = (N, wind_farm_N, no_wind_farm_N, N)
  8.     return matrix sample_size = sample_size
  9. end

. 
. * Execute
. main

Duplicates in terms of regionname

(3,628,944 observations deleted)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
  avg_income |     13,904    58.20166    38.28502   17.00462   984.9697

Two-sample t test with unequal variances
------------------------------------------------------------------------------
   Group |     Obs        Mean    Std. Err.   Std. Dev.   [95% Conf. Interval]
---------+--------------------------------------------------------------------
       0 |  13,603     58.4192    .3311766    38.62575    57.77004    59.06835
       1 |     301     48.3708     .780437    13.54008    46.83497    49.90662
---------+--------------------------------------------------------------------
combined |  13,904    58.20166    .3246826    38.28502    57.56524    58.83808
---------+--------------------------------------------------------------------
    diff |             10.0484     .847797                8.381916    11.71488
------------------------------------------------------------------------------
    diff = mean(0) - mean(1)                                      t =  11.8524
Ho: diff = 0                     Satterthwaite's degrees of freedom =  417.472

    Ha: diff < 0                 Ha: diff != 0                 Ha: diff > 0
 Pr(T < t) = 1.0000         Pr(|T| > |t|) = 0.0000          Pr(T > t) = 0.0000

      Source |       SS           df       MS      Number of obs   =    13,904
-------------+----------------------------------   F(1, 13902)     =    294.39
       Model |  422582.207         1  422582.207   Prob > F        =    0.0000
    Residual |  19955640.5    13,902  1435.45105   R-squared       =    0.0207
-------------+----------------------------------   Adj R-squared   =    0.0207
       Total |  20378222.7    13,903  1465.74284   Root MSE        =    37.887

-------------------------------------------------------------------------------------
         avg_income |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------------+----------------------------------------------------------------
wind_zip_area_ratio |  -.1909122   .0111268   -17.16   0.000    -.2127223   -.1691021
              _cons |   62.28598   .3998816   155.76   0.000     61.50216     63.0698
-------------------------------------------------------------------------------------

      Source |       SS           df       MS      Number of obs   =    13,904
-------------+----------------------------------   F(4, 13899)     =    289.54
       Model |  1567464.34         4  391866.086   Prob > F        =    0.0000
    Residual |  18810758.4    13,899  1353.38934   R-squared       =    0.0769
-------------+----------------------------------   Adj R-squared   =    0.0767
       Total |  20378222.7    13,903  1465.74284   Root MSE        =    36.788

-------------------------------------------------------------------------------------
         avg_income |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------------+----------------------------------------------------------------
wind_zip_area_ratio |  -.2396247    .011559   -20.73   0.000     -.262282   -.2169674
        black_ratio |  -56.15077    2.06659   -27.17   0.000    -60.20157   -52.09998
          elevation |   -.002826   .0011382    -2.48   0.013     -.005057    -.000595
          near_dist |   -.011231   .0016306    -6.89   0.000    -.0144271   -.0080348
              _cons |   71.52587   .5289497   135.22   0.000     70.48906    72.56268
-------------------------------------------------------------------------------------

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
 black_ratio |     13,904    .0893126    .1595871          0   .9805999

Two-sample t test with unequal variances
------------------------------------------------------------------------------
   Group |     Obs        Mean    Std. Err.   Std. Dev.   [95% Conf. Interval]
---------+--------------------------------------------------------------------
       0 |  13,603    .0908209    .0013796    .1609066    .0881167    .0935252
       1 |     301    .0211487    .0023156    .0401747    .0165918    .0257057
---------+--------------------------------------------------------------------
combined |  13,904    .0893126    .0013534    .1595871    .0866598    .0919655
---------+--------------------------------------------------------------------
    diff |            .0696722    .0026955                .0643775    .0749669
------------------------------------------------------------------------------
    diff = mean(0) - mean(1)                                      t =  25.8480
Ho: diff = 0                     Satterthwaite's degrees of freedom =  549.245

    Ha: diff < 0                 Ha: diff != 0                 Ha: diff > 0
 Pr(T < t) = 1.0000         Pr(|T| > |t|) = 0.0000          Pr(T > t) = 0.0000

      Source |       SS           df       MS      Number of obs   =    13,904
-------------+----------------------------------   F(1, 13902)     =    929.18
       Model |  22.1834206         1  22.1834206   Prob > F        =    0.0000
    Residual |  331.898882    13,902  .023874182   R-squared       =    0.0627
-------------+----------------------------------   Adj R-squared   =    0.0626
       Total |  354.082302    13,903   .02546805   Root MSE        =    .15451

-------------------------------------------------------------------------------------
        black_ratio |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------------+----------------------------------------------------------------
wind_zip_area_ratio |  -.0013832   .0000454   -30.48   0.000    -.0014722   -.0012943
              _cons |   .1189049   .0016308    72.91   0.000     .1157083    .1221015
-------------------------------------------------------------------------------------

      Source |       SS           df       MS      Number of obs   =    13,904
-------------+----------------------------------   F(4, 13899)     =    613.99
       Model |  53.1711075         4  13.2927769   Prob > F        =    0.0000
    Residual |  300.911195    13,899  .021649845   R-squared       =    0.1502
-------------+----------------------------------   Adj R-squared   =    0.1499
       Total |  354.082302    13,903   .02546805   Root MSE        =    .14714

-------------------------------------------------------------------------------------
        black_ratio |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------------+----------------------------------------------------------------
wind_zip_area_ratio |   -.001549   .0000451   -34.37   0.000    -.0016373   -.0014606
         avg_income |  -.0008982   .0000331   -27.17   0.000     -.000963   -.0008334
          elevation |  -.0001097   4.46e-06   -24.61   0.000    -.0001184    -.000101
          near_dist |   .0000604   6.51e-06     9.28   0.000     .0000477    .0000732
              _cons |   .1926804   .0027736    69.47   0.000     .1872438    .1981169
-------------------------------------------------------------------------------------

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   elevation |     13,904    280.8244    376.2553        -37       3630

Two-sample t test with unequal variances
------------------------------------------------------------------------------
   Group |     Obs        Mean    Std. Err.   Std. Dev.   [95% Conf. Interval]
---------+--------------------------------------------------------------------
       0 |  13,603    276.5009    3.211961    374.6171     270.205    282.7968
       1 |     301    476.2126    22.95892    398.3224    431.0317    521.3936
---------+--------------------------------------------------------------------
combined |  13,904    280.8244    3.190897    376.2553    274.5698     287.079
---------+--------------------------------------------------------------------
    diff |           -199.7117    23.18251               -245.3256   -154.0978
------------------------------------------------------------------------------
    diff = mean(0) - mean(1)                                      t =  -8.6148
Ho: diff = 0                     Satterthwaite's degrees of freedom =  311.856

    Ha: diff < 0                 Ha: diff != 0                 Ha: diff > 0
 Pr(T < t) = 0.0000         Pr(|T| > |t|) = 0.0000          Pr(T > t) = 1.0000

      Source |       SS           df       MS      Number of obs   =    13,904
-------------+----------------------------------   F(1, 13902)     =    138.33
       Model |  19392089.4         1  19392089.4   Prob > F        =    0.0000
    Residual |  1.9488e+09    13,902  140183.333   R-squared       =    0.0099
-------------+----------------------------------   Adj R-squared   =    0.0098
       Total |  1.9682e+09    13,903  141568.064   Root MSE        =    374.41

-------------------------------------------------------------------------------------
          elevation |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------------+----------------------------------------------------------------
wind_zip_area_ratio |   1.293273   .1099578    11.76   0.000     1.077741    1.508806
              _cons |   253.1565   3.951713    64.06   0.000     245.4106    260.9024
-------------------------------------------------------------------------------------

      Source |       SS           df       MS      Number of obs   =    13,904
-------------+----------------------------------   F(4, 13899)     =   3074.65
       Model |   923991565         4   230997891   Prob > F        =    0.0000
    Residual |  1.0442e+09    13,899  75129.8098   R-squared       =    0.4695
-------------+----------------------------------   Adj R-squared   =    0.4693
       Total |  1.9682e+09    13,903  141568.064   Root MSE        =     274.1

-------------------------------------------------------------------------------------
          elevation |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------------+----------------------------------------------------------------
wind_zip_area_ratio |  -1.407723   .0866246   -16.25   0.000    -1.577519   -1.237927
         avg_income |  -.1568796   .0631839    -2.48   0.013    -.2807287   -.0330306
        black_ratio |  -380.6911   15.46762   -24.61   0.000    -411.0097   -350.3724
          near_dist |   .9518892   .0091052   104.54   0.000     .9340417    .9697366
              _cons |   151.5772   5.857614    25.88   0.000     140.0955    163.0589
-------------------------------------------------------------------------------------

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   near_dist |     13,904    212.7294    265.0477   .0020966   1316.173

Two-sample t test with unequal variances
------------------------------------------------------------------------------
   Group |     Obs        Mean    Std. Err.   Std. Dev.   [95% Conf. Interval]
---------+--------------------------------------------------------------------
       0 |  13,603    210.4821    2.259091    263.4821     206.054    214.9102
       1 |     301     314.289    17.99094    312.1312    278.8845    349.6934
---------+--------------------------------------------------------------------
combined |  13,904    212.7294    2.247782    265.0477    208.3234    217.1353
---------+--------------------------------------------------------------------
    diff |           -103.8069    18.13222               -139.4849   -68.12887
------------------------------------------------------------------------------
    diff = mean(0) - mean(1)                                      t =  -5.7250
Ho: diff = 0                     Satterthwaite's degrees of freedom =  309.533

    Ha: diff < 0                 Ha: diff != 0                 Ha: diff > 0
 Pr(T < t) = 0.0000         Pr(|T| > |t|) = 0.0000          Pr(T > t) = 1.0000

      Source |       SS           df       MS      Number of obs   =    13,904
-------------+----------------------------------   F(1, 13902)     =    891.29
       Model |  58844950.7         1  58844950.7   Prob > F        =    0.0000
    Residual |   917845104    13,902  66022.5222   R-squared       =    0.0602
-------------+----------------------------------   Adj R-squared   =    0.0602
       Total |   976690054    13,903  70250.3096   Root MSE        =    256.95

-------------------------------------------------------------------------------------
          near_dist |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------------+----------------------------------------------------------------
wind_zip_area_ratio |   2.252852   .0754613    29.85   0.000     2.104938    2.400766
              _cons |   164.5325    2.71196    60.67   0.000     159.2167    169.8483
-------------------------------------------------------------------------------------

      Source |       SS           df       MS      Number of obs   =    13,904
-------------+----------------------------------   F(4, 13899)     =   3215.04
       Model |   469386271         4   117346568   Prob > F        =    0.0000
    Residual |   507303784    13,899  36499.3009   R-squared       =    0.4806
-------------+----------------------------------   Adj R-squared   =    0.4804
       Total |   976690054    13,903  70250.3096   Root MSE        =    191.05

-------------------------------------------------------------------------------------
          near_dist |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
--------------------+----------------------------------------------------------------
wind_zip_area_ratio |   1.737893   .0591392    29.39   0.000     1.621972    1.853814
         avg_income |  -.3028857   .0439743    -6.89   0.000    -.3890813   -.2166901
        black_ratio |   101.8866   10.97948     9.28   0.000     80.36531    123.4078
          elevation |   .4624435   .0044235   104.54   0.000     .4537729     .471114
              _cons |    54.2127    4.15461    13.05   0.000     46.06911     62.3563
-------------------------------------------------------------------------------------
  13,904
  301
  13,603
(note: file ../output/tables.txt not found)

. 
end of do-file

 make.py ended: 2018-03-12 13:21:32
